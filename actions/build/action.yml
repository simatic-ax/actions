name: "Build package"
description: "Build the package based on the projects apax.yaml file"
inputs:
  APAX_TOKEN:
    description: "The access token is used to log into the apax registry in order to retrieve apax npm package"
    required: true
    
runs:
  using: "composite"
  steps:
    - name: Show contents of folder
      shell: bash
      run: |
        pwd
        ls -a
    - name: Login to apax repository
      shell: bash
      run: apax login --password ${{ inputs.APAX_TOKEN }}

    - name: Install apax dependencies
      shell: bash
      run: apax install --immutable

    - name: Build apax package
      shell: bash
      run: apax build